openapi: 3.0.3
info:
  title: Sample Ecommerce App
  description: >
    'This is a ***sample ecommerce app API***.  You can find out more about Swagger at [swagger.io](http://swagger.io).
    Description supports markdown markup. For example, you can use the `inline code` using back ticks.'
  termsOfService: https://github.com/PacktPublishing/Modern-API-Development-with-Spring-and-Spring-Boot/blob/master/LICENSE
  contact:
    email: support@packtpub.com
  license:
    name: MIT
    url: https://github.com/PacktPublishing/Modern-API-Development-with-Spring-and-Spring-Boot/blob/master/LICENSE
  version: 1.0.0
externalDocs:
  description: Any document link you want to generate along with API.
  url: http://swagger.io
servers:
  - url: /api/v1  # Relative path which maps to localhost:8080 on dev
    description: Current server
tags:
  - name: admin
    description: Administrative operations
  - name: product
    description: Operations related to products
  - name: customer
    description: Operations related to a customer
  - name: address
    description: Operations related to a customer address
  - name: card
    description: Operations related to credit/debit cards
  - name: cart
    description: Everything related to cart
    externalDocs:
      description: Find out more (extra document link)
      url: http://swagger.io
  - name: order
    description: Operation related to orders
  - name: payment
    description: Operations related to payments
  - name: shipment
    description: Operations related to shipments
paths:
  /products:
    get:
      tags:
        - product
      summary: Retrieves all the matched products
      description: Retrieves the products that matches the given query criteria
      operationId: queryProducts
      parameters:
        - name: tag
          in: query
          required: false
          description: Product tag
          schema:
            type: string
        - name: name
          in: query
          required: false
          description: Product name
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: Query page number
          schema:
            type: integer
            format: int32
            default: 1
        - name: size
          in: query
          required: false
          description: Query page size
          schema:
            type: integer
            format: int32
            default: 10
      responses:
        200:
          description: For successful fetch.
          content:
            application/xml:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Product'
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Product'
  /products/{id}:
    get:
      tags:
        - product
      summary: Retrieves a product
      description: Retrieves the product that matches the given product ID
      operationId: getProductById
      parameters:
        - name: id
          in: path
          required: true
          description: Product Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        200:
          description: For successful fetch.
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Product'
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
  /customers:
    get:
      tags:
        - admin
      summary: Retrieves all customers in the system
      description: Retrieves all customers, or empty collection if no use found. Typically an admin-only endpoint.
      operationId: getAllCustomers
      responses:
        200:
          description: For successful fetch.
          content:
            application/xml:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Customer'
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Customer'
    post:
      tags:
        - customer
      summary: Creates a new customer
      description: Creates a new customer. Throws error if address already exists.
      operationId: createCustomer
      requestBody:
        required: true
        content:
          application/xml:
            schema:
              $ref: '#/components/schemas/CustomerReq'
          application/json:
            schema:
              $ref: '#/components/schemas/CustomerReq'
      responses:
        201: # 201 for resource creation
          description: The customer resource was successfully created.
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Customer'
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
  /customers/{id}:
    get:
      tags:
        - customer
      summary: Retrieves a customer
      description: Retrieves a customers identifiable by given ID
      operationId: getCustomerById
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        200:
          description: For successful fetch.
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Customer'
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
    put:
      tags:
        - customer
      summary: Updates a customer
      description: Updates a customer.
      operationId: updateCustomer
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      requestBody:
        required: true
        description: Customer object (excluding ID which is provided on the path)
        content:
          application/xml:
            schema:
              $ref: '#/components/schemas/CustomerReq'
          application/json:
            schema:
              $ref: '#/components/schemas/CustomerReq'
      responses:
        200:
          description: Customer updated successfully
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Customer'
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        404:
          description: Given customer ID doesn't exist
          content: { }
    delete:
      tags:
        - customer
      summary: Deletes the customer
      description: Deletes the customer identifiable by given ID
      operationId: deleteCustomerById
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        202:
          description: Request accepted, returns this status even if customer does not exist
          content: {}
  /customers/{id}/addresses:
    get:
      tags:
        - address
      summary: Retrieves the addresses for a specific customer
      description: Retrieves a collection of addresses associated with the given customer ID.
      operationId: getCustomerAddresses
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        200:
          description: For successful fetch. Returns a collection of addresses.
          content:
            application/xml:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Address'
            application/json:
              schema:
                type: array # Ensure the JSON schema is an array, matching the XML type
                items:
                  $ref: '#/components/schemas/Address'
    post:
      tags:
        - address
      summary: Creates a new customer addresses
      description: Creates a new customer addresses. Does nothing if address already exists.
      operationId: createAddress
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      requestBody:
        required: true
        content:
          application/xml:
            schema:
              $ref: '#/components/schemas/AddressReq'
          application/json:
            schema:
              $ref: '#/components/schemas/AddressReq'
      responses:
        201: # 201 for resource creation
          description: The address resource was successfully created.
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Address'
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
  /customers/{id}/cards:
    get:
      tags:
        - card
      summary: Retrieves the cards for a specific customer
      description: Retrieves a collection of cards associated with the given customer ID.
      operationId: getCustomerCards
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        200:
          description: For successful fetch. Returns a collection of cards.
          content:
            application/xml:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Card'
            application/json:
              schema:
                type: array # Ensure the JSON schema is an array, matching the XML type
                items:
                  $ref: '#/components/schemas/Card'
    post:
      tags:
        - card
      summary: Creates a new customer card
      description: Creates a new customer card. Does nothing if card already exists.
      operationId: registerCard
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      requestBody:
        required: true
        content:
          application/xml:
            schema:
              $ref: '#/components/schemas/CardReq'
          application/json:
            schema:
              $ref: '#/components/schemas/CardReq'
      responses:
        201: # 201 for resource creation
          description: The card resource was successfully created.
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Card'
            application/json:
              schema:
                $ref: '#/components/schemas/Card'
  /customers/{id}/cart:
    get:
      tags:
        - cart
      summary: Retrieves the shopping cart
      description: Retrieves the shopping cart of a specific customer
      operationId: getCustomerCart
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        200:
          description: successful operation
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Cart'
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
        404:
          description: Given customer ID doesn't exist
          content: { }
    delete:
      tags:
        - cart
      summary: Delete the shopping cart
      description: Deletes the shopping cart of given customer
      operationId: deleteCustomerCart
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        202:
          description: request accepted
        404:
          description: Given customer ID doesn't exist
          content: { }
  /customers/{id}/cart/items:
    get:
      tags:
        - cart
      summary: Retrieves the list of products in customer's shopping cart
      description: Retrieves the items in shopping cart of given customer
      operationId: getCustomerCartItems
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        200:
          description: successful operation
          content:
            application/xml:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Item'
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Item'
        404:
          description: Given customer ID doesn't exist
          content: { }
    post:
      tags:
        - cart
      summary: Adds an item in shopping cart
      description: Adds an item to the shopping cart if it doesn't already exist, or increment quantity by the specified number of items if it does.
      operationId: addItemToCart
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      requestBody:
        required: true
        description: Item object
        content:
          application/xml:
            schema:
              $ref: '#/components/schemas/Item'
          application/json:
            schema:
              $ref: '#/components/schemas/Item'
      responses:
        201:
          description: Item added successfully
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Cart'
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
        404:
          description: Given customer ID doesn't exist
          content: { }
    put:
      tags:
        - cart
      summary: Replaces an item in shopping cart
      description: Replaces an item in the cart with the given item (based on productId).
      operationId: replaceItemInCart
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      requestBody:
        required: true
        description: Item object
        content:
          application/xml:
            schema:
              $ref: '#/components/schemas/Item'
          application/json:
            schema:
              $ref: '#/components/schemas/Item'
      responses:
        200:
          description: Item replaced successfully
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Cart'
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
        404:
          description: Given customer ID doesn't exist
          content: { }
  /customers/{id}/cart/items/{productId}:
    get:
      tags:
        - cart
      summary: Retrieves given item from customer's shopping cart
      description: Retrieves items for a given product id from shopping cart of given customer
      operationId: getCustomerCartItemByProductId
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
        - name: productId
          in: path
          required: true
          description: Product Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        200:
          description: If item exists in cart
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Item'
            application/json:
              schema:
                $ref: '#/components/schemas/Item'
        404:
          description: Given item (product) ID doesn't exist
          content: { }
    delete:
      tags:
        - cart
      summary: Delete the item from shopping cart
      description: Deletes the item from shopping cart of given customer
      operationId: deleteItemFromCustomerCart
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
        - name: productId
          in: path
          required: true
          description: Product Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        202:
          description: Accepts the request, regardless of whether the specified item exists in the cart or not.
  /customers/{id}/orders:
    get:
      tags:
        - order
      summary: Retrieves the orders for a specific customer
      description: Retrieves a collection of orders associated with the given customer ID.
      operationId: getCustomerOrders
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        200:
          description: For successful fetch. Returns a collection of orders.
          content:
            application/xml:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Order'
            application/json:
              schema:
                type: array # Ensure the JSON schema is an array, matching the XML type
                items:
                  $ref: '#/components/schemas/Order'
    post:
      tags:
        - order
      summary: Creates a new order for a customer
      description: Creates a new order for a customer with the given order request.
      operationId: addOrder
      parameters:
        - name: id
          in: path
          required: true
          description: Customer Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      requestBody:
        required: true
        description: New Order Request object
        content:
          application/xml:
            schema:
              $ref: '#/components/schemas/OrderReq'
          application/json:
            schema:
              $ref: '#/components/schemas/OrderReq'
      responses:
        201:
          description: Order added successfully
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Order'
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
        406:
          description: If payment is not authorized.
          content: { }
  /addresses:
    get:
      tags:
        - admin
      summary: Retrieves all addresses in the system
      description: Retrieves all addresses in the system. Returns an empty collection if no results are found. Typically an admin-only endpoint.
      operationId: getAllAddresses
      responses:
        200:
          description: For successful fetch. Returns a collection of addresses.
          content:
            application/xml:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Address'
            application/json:
              schema:
                type: array # Ensure the JSON schema is an array, matching the XML type
                items:
                  $ref: '#/components/schemas/Address'
  /addresses/{id}:
    get:
      tags:
        - address
      summary: Retrieves address
      description: Retrieves a customer address based on given address ID.
      operationId: getAddressById
      parameters:
        - name: id
          in: path
          required: true
          description: address Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        200:
          description: For successful fetch.
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Address'
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
    delete:
      tags:
        - address
      summary: Deletes customer's address
      description: Deletes customer's address based on given address ID.
      operationId: deleteAddressById
      parameters:
        - name: id
          in: path
          required: true
          description: address Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        202:
          description: Accepts the deletion request and perform deletion. If ID does not exist, does nothing.
          content: {}
  /cards:
    get:
      tags:
        - admin
      summary: Retrieves all cards in the system
      description: Retrieves all cards in the system. Returns an empty collection if no results are found. Typically an admin-only endpoint.
      operationId: getAllCards
      responses:
        200:
          description: For successful fetch. Returns a collection of cards.
          content:
            application/xml:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Card'
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Card'
  /cards/{id}:
    get:
      tags:
        - card
      summary: Retrieves a card
      description: Retrieves a card based on given card ID.
      operationId: getCardById
      parameters:
        - name: id
          in: path
          required: true
          description: card Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        200:
          description: For successful fetch.
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Card'
            application/json:
              schema:
                $ref: '#/components/schemas/Card'
    delete:
      tags:
        - card
      summary: Deletes card's address
      description: Deletes card's address based on given card ID.
      operationId: deleteCardById
      parameters:
        - name: id
          in: path
          required: true
          description: card Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        202:
          description: Accepts the deletion request and perform deletion. If ID does not exist, does nothing.
          content: {}
  /orders:
    get:
      tags:
        - admin
      summary: Retrieves all orders in the system
      description: Retrieves all orders. Typically an admin-only endpoint.
      operationId: getAllOrders
      responses:
        200:
          description: If order exists.
          content:
            application/xml:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Order'
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Order'
        404:
          description: Order doesn't exist for given customer.
          content: { }
  /orders/{id}:
    get:
      tags:
        - order
      summary: Retrieves the order of given order ID
      description: Retrieves orders of given order ID
      operationId: getByOrderId
      parameters:
        - name: id
          in: path
          required: true
          description: Order Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        200:
          description: If order exists.
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Order'
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
        404:
          description: Order doesn't exist for given customer.
          content: {}
  /orders/{id}/payments:
    get:
      tags:
        - payment
      summary: Retrieves a payment authorization
      description: Retrieves the payment authorization for the specified order
      operationId: getOrdersPaymentAuthorization
      parameters:
        - name: id
          in: path
          required: true
          description: Order Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        200:
          description: For successful fetch.
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Authorization'
            application/json:
              schema:
                $ref: '#/components/schemas/Authorization'
    post:
      tags:
        - payment
      summary: Authorize a payment request
      description: Authorize a payment request.
      operationId: authorize
      parameters:
        - name: id
          in: path
          required: true
          description: Order Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      requestBody:
        required: true
        content:
          application/xml:
            schema:
              $ref: '#/components/schemas/PaymentReq'
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentReq'
      responses:
        201: # Use 201 Created for resource creation
          description: The payment resource was successfully created.
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Authorization'
            application/json:
              schema:
                $ref: '#/components/schemas/Authorization'
  /orders/{id}/shipment:
    get:
      tags:
        - shipment
      summary: Retrieves the Shipment
      description: Retrieves the Shipment for the specified order
      operationId: getShipmentByOrderId
      parameters:
        - name: id
          in: path
          required: true
          description: Order Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      responses:
        200:
          description: For successful fetch.
          content:
            application/xml:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Shipment'
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Shipment'
    post:
      tags:
        - shipment
      summary: Ship the specified shipping request
      description: Ship the specified shipping request
      operationId: shipOrder
      parameters:
        - name: id
          in: path
          required: true
          description: Order Identifier
          schema:
            type: string
            format: uuid
            pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      requestBody:
        required: true
        content:
          application/xml:
            schema:
              $ref: '#/components/schemas/ShipmentReq'
          application/json:
            schema:
              $ref: '#/components/schemas/ShipmentReq'
      responses:
        201: # Use 201 Created for resource creation
          description: The shipment resource was successfully created.
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Shipment'
            application/json:
              schema:
                $ref: '#/components/schemas/Shipment'
components:
  schemas:
    UUID:
      type: string
      description: A standard unique identifier
      format: uuid
      pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
      example: 00000000-0000-0000-0000-000000000001
    BigDecimal:
      type: string
      description: High-precision decimal number. Transmitted as a string to preserve precision.
      example: "123.45"
      # Pattern for validation, ensures the string contains only a number, an optional minus sign at the beginning, and an optional decimal part:
      pattern: '^-?\d+(\.\d+)?$'
    Product:
      type: object
      description: Product information
      required:
        - id
        - name
        - price
      properties:
        id:
          description: Product identifier
          $ref: '#/components/schemas/UUID'
        name:
          type: string
          description: Product Name
        description:
          type: string
          description: Product's description
        imageUrl:
          type: string
          description: Product image's URL
        price:
          description: Product price
          allOf:
            - $ref: '#/components/schemas/BigDecimal'
        count:
          type: integer
          description: Product count
          format: int32
          minimum: 0
        tag:
          type: array
          description: Tags associated with the product
          items:
            $ref: '#/components/schemas/Tag'
    Tag:
      type: object
      description: Product tag information
      properties:
        id:
          description: Tag identifier
          $ref: '#/components/schemas/UUID'
        name:
          type: string
          description: Tag Name
    CustomerBase:
      type: object
      description: Base properties of a customer object
      required:
        - username
      properties:
        username:
          type: string
          minLength: 3
          maxLength: 40
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string
        status:
          type: string
      xml:
        name: CustomerBase
    CustomerReq:
      type: object
      description: Request object for a new customer.
      allOf:
        - $ref: '#/components/schemas/CustomerBase'
      xml:
        name: CustomerReq
    Customer:
      type: object
      description: "Represents a complete customer resource, including its ID"
      allOf:
        - $ref: '#/components/schemas/CustomerBase'
      required:
        - id
      properties:
        id:
          description: The id of the customer
          $ref: '#/components/schemas/UUID'
      xml:
        name: Customer
    AddressBase:
      type: object
      description: Base properties for an address
      required:
        - street
        - city
        - zipcode
      properties:
        number:
          type: string
          description: house or flat number
          maxLength: 20
        residency:
          type: string
          description: Society or building name (optional)
        street:
          type: string
          description: street name
          minLength: 1
          maxLength: 80
        city:
          type: string
          description: city name
          minLength: 1
          maxLength: 40
        state:
          type: string
          description: state name
          maxLength: 40
        country:
          type: string
          description: country name
          maxLength: 40
        zipcode:
          type: string
          description: postal code
          minLength: 1
          maxLength: 20
      xml:
        name: AddressBase
    AddressReq:
      type: object
      description: Request object for a new address
      allOf:
        - $ref: '#/components/schemas/AddressBase'
      xml:
        name: AddressReq
    Address:
      type: object
      description: "Represents a complete address resource, including its ID and associated Customer ID."
      allOf:
        - $ref: '#/components/schemas/AddressBase'
      required:
        - id
        - customerId
      properties:
        id:
          description: Address identifier
          $ref: '#/components/schemas/UUID'
        customerId:
          description: The customer ID associated with this address.
          $ref: '#/components/schemas/UUID'
      xml:
        name: Address
    CardDetailsBase:
      type: object
      description: Base properties for a credit/debit card.
      required:
        - cardNumber
        - expires
        - cvv
      properties:
        cardNumber:
          type: string
          description: Card Number (The full number should only be sent in the request, not returned)
        expires:
          type: string
          description: Expiration date (e.g., MM/YY or MM/YYYY)
          example: 01/29
          pattern: '^(0[1-9]|1[0-2])\/\d{2}(\d{2})?$' # Example: MM/YY or MM/YYYY
        cvv:
          type: string
          description: CVV code (Only sent in the request, never stored or returned)
          example: 123
          pattern: '^\d{3,4}$' # 3 or 4 digits
          writeOnly: true
      xml:
        name: CardDetailsBase
    CardReq:
      type: object
      description: Request object for new card registration.
      allOf:
        - $ref: '#/components/schemas/CardDetailsBase'
      xml:
        name: CardReq
    Card:
      type: object
      description: Represents a registered Card resource, with masked details.
      allOf:
          - $ref: '#/components/schemas/CardDetailsBase'
      required:
        - id
        - customerId
        - cardNumber
        - expires
      properties:
        id:
          description: Card identifier
          $ref: '#/components/schemas/UUID'
        customerId:
          description: Id of customer owning the card
          $ref: '#/components/schemas/UUID'
        cardNumber:
          type: string
          description: Card Number (Masked for security)
          example: '************1234'
        expires:
          type: string
          description: Expiration date (MM/YY or MM/YYYY)
        cvv:
          type: string
          description: CVV code (Masked response for security)
          readOnly: true
          example: '***'
      xml:
        name: Card
    CustomerInfoOnCard:
      type: object
      description: Customer information required for payment processing
      properties:
        firstName:
          type: string
          description: Customer first name
        lastName:
          type: string
          description: Customer last name
      xml:
        name: CustomerInfoOnCard
    Item:
      type: object
      description: Item in shopping cart
      required:
        - productId
        - quantity
        - unitPrice
      properties:
        productId:
          description: Product Identifier for this item
          $ref: '#/components/schemas/UUID'
        quantity:
          type: integer
          description: The item quantity
          format: int32
          minimum: 0
        unitPrice:
          description: The item's price per unit
          allOf:
            - $ref: '#/components/schemas/BigDecimal'
      xml:
        name: Item
    Cart:
      type: object
      description: Shopping Cart of the customer
      properties:
        id:
          description: Cart Identifier
          $ref: '#/components/schemas/UUID'
        customerId:
          description: Id of the customer who possesses the cart
          $ref: '#/components/schemas/UUID'
        items:
          type: array
          description: Collection of items in cart.
          items:
            $ref: '#/components/schemas/Item'
      xml:
        name: Cart
    OrderBase:
      type: object
      description: Base properties for an order, including the items list.
      properties:
        items:
          type: array
          description: Collection of items for the order.
          items:
            $ref: '#/components/schemas/Item'
      xml:
        name: OrderBase
    OrderReq:
      type: object
      description: Request object for a new order
      allOf:
        - $ref: '#/components/schemas/OrderBase'
      required:
        - addressId
        - cardId
      properties:
        addressId:
          description: Identifier of the customer's shipping address
          $ref: '#/components/schemas/UUID'
        cardId:
          description: Identifier of the customer's payment card
          $ref: '#/components/schemas/UUID'
      xml:
        name: OrderReq
    Order:
      type: object
      description: Represents an order
      allOf:
        - $ref: '#/components/schemas/OrderBase'
      required:
        - id
        - customer
        - address
        - date
        - total
        - status
        - payment
        - shipment
      properties:
        id:
          description: Order identifier
          $ref: '#/components/schemas/UUID'
        customer:
          $ref: '#/components/schemas/Customer'
        address:
          $ref: '#/components/schemas/Address'
        card:
          $ref: '#/components/schemas/Card'
        date:
          type: string
          description: Order's data and time details
          format: date-time
        total:
          description: Order total
          allOf:
            - $ref: '#/components/schemas/BigDecimal'
        payment:
          $ref: '#/components/schemas/Payment'
        shipment:
          $ref: '#/components/schemas/Shipment'
        status:
          type: string
          description: Order Status
          enum:
            - CREATED
            - PAID
            - SHIPPED
            - PAYMENT_FAILED
            - SHIPMENT_FAILED
            - COMPLETED
      xml:
        name: Order
    Authorization:
      type: object
      description: authorization of payment
      properties:
        orderId:
          description: Order Identification belonging to the authorization
          $ref: '#/components/schemas/UUID'
        time:
          type: string
          description: Timestamp when this authorization was created
          format: date-time
        authorized:
          type: boolean
          description: Flag that specifies whether the payment is authorized
        message:
          type: string
          description: Approval or rejection message
        error:
          type: string
          description: Processing error description, if any
      xml:
        name: Authorization
    PaymentBase:
      type: object
      description: Base properties for a payment
      required:
        - address
        - card
        - amount
      properties:
        customer:
          $ref: '#/components/schemas/CustomerInfoOnCard'
        address:
          $ref: '#/components/schemas/Address'
        card:
          $ref: '#/components/schemas/Card'
        amount:
          description: Payment amount
          allOf:
            - $ref: '#/components/schemas/BigDecimal'
      xml:
        name: PaymentBase
    PaymentReq:
      type: object
      description: Request object for a payment.
      allOf:
        - $ref: '#/components/schemas/PaymentBase'
      xml:
        name: PaymentReq
    Payment:
      type: object
      description: Object corresponding to a payment.
      properties:
        id:
          description: Payment identifier
          $ref: '#/components/schemas/UUID'
        orderId:
          description: Order Identifier belonging to this payment request
          $ref: '#/components/schemas/UUID'
        authorized:
          type: boolean
          description: Flag that specifies whether payment is authorized or not
        message:
          type: string
          description: Approval or rejection message
      xml:
        name: Payment
    ShipmentBase:
      type: object
      description: Base information for a shipment
      properties:
        address:
          $ref: '#/components/schemas/Address'
        itemCount:
          type: integer
          description: The number of items in the shipment
          format: int32
      xml:
        name: ShipmentBase
    ShipmentReq:
      type: object
      description: Request object for a shipment.
      allOf:
        - $ref: '#/components/schemas/ShipmentBase'
      xml:
        name: ShipmentReq
    Shipment:
      type: object
      description: Object corresponding to a shipment.
      properties:
        id:
          description: Shipment Identifier
          $ref: '#/components/schemas/UUID'
        orderId:
          description: Order Identifier
          $ref: '#/components/schemas/UUID'
        carrier:
          type: string
          description: Shipping Carrier
        trackingNumber:
          type: string
          description: Shipping Tracking Number
        estDeliveryDate:
          type: string
          description: Estimated Delivery Date
          format: date
      xml:
        name: Shipment